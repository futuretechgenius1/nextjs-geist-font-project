{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport { useRouter } from \"next/navigation\";\nimport {\n  Box,\n  Container,\n  Grid,\n  Paper,\n  Typography,\n  CircularProgress,\n} from \"@mui/material\";\n\ninterface SummaryCount {\n  applications: number;\n  configServers: number;\n  adGroups: number;\n  confluencePages: number;\n  dbDetails: number;\n}\n\nconst DashboardPage: React.FC = () => {\n  const { token, user } = useAuth();\n  const router = useRouter();\n  const [loading, setLoading] = useState(true);\n  const [counts, setCounts] = useState<SummaryCount>({\n    applications: 0,\n    configServers: 0,\n    adGroups: 0,\n    confluencePages: 0,\n    dbDetails: 0,\n  });\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!token) {\n      router.push(\"/login\");\n      return;\n    }\n\n    const fetchCounts = async () => {\n      try {\n        const endpoints = [\n          \"applications\",\n          \"config-servers\",\n          \"ad-groups\",\n          \"confluence-pages\",\n          \"db-details\",\n        ];\n\n        const results = await Promise.all(\n          endpoints.map((endpoint) =>\n            fetch(`http://localhost:5000/api/${endpoint}`, {\n              headers: { Authorization: `Bearer ${token}` },\n            }).then((res) => {\n              if (!res.ok) throw new Error(\"Failed to fetch\");\n              return res.json();\n            })\n          )\n        );\n\n        setCounts({\n          applications: results[0].length,\n          configServers: results[1].length,\n          adGroups: results[2].length,\n          confluencePages: results[3].length,\n          dbDetails: results[4].length,\n        });\n        setLoading(false);\n      } catch (err) {\n        setError(\"Failed to load data\");\n        setLoading(false);\n      }\n    };\n\n    fetchCounts();\n  }, [token, router]);\n\n  if (!user) return null;\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n      <Typography variant=\"h4\" gutterBottom>\n        Welcome, {user.username}\n      </Typography>\n      {loading ? (\n        <Box sx={{ display: \"flex\", justifyContent: \"center\", mt: 4 }}>\n          <CircularProgress />\n        </Box>\n      ) : error ? (\n        <Typography color=\"error\">{error}</Typography>\n      ) : (\n        <Grid container spacing={3} component=\"div\">\n          <Grid item xs={12} sm={6} md={4} component=\"div\">\n            <Paper sx={{ p: 2 }}>\n              <Typography variant=\"h6\">Applications</Typography>\n              <Typography variant=\"h3\">{counts.applications}</Typography>\n            </Paper>\n          </Grid>\n          <Grid item xs={12} sm={6} md={4} component=\"div\">\n            <Paper sx={{ p: 2 }}>\n              <Typography variant=\"h6\">Config Servers</Typography>\n              <Typography variant=\"h3\">{counts.configServers}</Typography>\n            </Paper>\n          </Grid>\n          <Grid item xs={12} sm={6} md={4} component=\"div\">\n            <Paper sx={{ p: 2 }}>\n              <Typography variant=\"h6\">AD Groups</Typography>\n              <Typography variant=\"h3\">{counts.adGroups}</Typography>\n            </Paper>\n          </Grid>\n          <Grid item xs={12} sm={6} md={6} component=\"div\">\n            <Paper sx={{ p: 2 }}>\n              <Typography variant=\"h6\">Confluence Pages</Typography>\n              <Typography variant=\"h3\">{counts.confluencePages}</Typography>\n            </Paper>\n          </Grid>\n          <Grid item xs={12} sm={6} md={6} component=\"div\">\n            <Paper sx={{ p: 2 }}>\n              <Typography variant=\"h6\">Database Details</Typography>\n              <Typography variant=\"h3\">{counts.dbDetails}</Typography>\n            </Paper>\n          </Grid>\n        </Grid>\n      )}\n    </Container>\n  );\n};\n\nexport default DashboardPage;\n"],"names":[],"mappings":"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","debugId":null}}]
}